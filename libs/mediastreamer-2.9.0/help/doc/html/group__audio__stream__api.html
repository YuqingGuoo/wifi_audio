<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>mediastreamer2: Audio streaming API - Create and run VoIP audio streams.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Audio streaming API - Create and run VoIP audio streams.<br/>
<small>
[<a class="el" href="group__mediastreamer2__high__api.html">Mediastreamer2's high level APIs</a>]</small>
</h1>
<p>Audio streaming API - Easily run audio streams from soundcard or wav files to RTP.  
<a href="#_details">More...</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct _AudioStream&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MS2_PUBLIC int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__audio__stream__api.html#ga16b4d05fcc54d238ebc808d0b0ee26b9">audio_stream_start_full</a> (<a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *stream, RtpProfile *profile, const char *rem_rtp_ip, int rem_rtp_port, const char *rem_rtcp_ip, int rem_rtcp_port, int payload, int jitt_comp, const char *infile, const char *outfile, <a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *playcard, <a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *captcard, bool_t use_ec)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MS2_PUBLIC <a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__audio__stream__api.html#ga90bb2b40afbb681ee0757d7bc9806a5f">audio_stream_new</a> (int loc_rtp_port, int loc_rtcp_port, bool_t ipv6)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MS2_PUBLIC int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__audio__stream__api.html#ga245f085458e2325150e61f1ffd750850">audio_stream_start_now</a> (<a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *stream, RtpProfile *prof, const char *remip, int remport, int rem_rtcp_port, int payload_type, int jitt_comp, <a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *playcard, <a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *captcard, bool_t echo_cancel)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MS2_PUBLIC void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__audio__stream__api.html#ga40714ac4d954903adb27cca6477b680a">audio_stream_iterate</a> (<a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *stream)</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Audio streaming API - Easily run audio streams from soundcard or wav files to RTP. </p>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="ga9e8d8f2dbcc208a83179961032fc76b4"></a><!-- doxytag: member="mediastream.h::AudioStream" ref="ga9e8d8f2dbcc208a83179961032fc76b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct _AudioStream <a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The AudioStream holds all resources to create and run typical VoIP audiostream. </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga16b4d05fcc54d238ebc808d0b0ee26b9"></a><!-- doxytag: member="mediastream.h::audio_stream_start_full" ref="ga16b4d05fcc54d238ebc808d0b0ee26b9" args="(AudioStream *stream, RtpProfile *profile, const char *rem_rtp_ip, int rem_rtp_port, const char *rem_rtcp_ip, int rem_rtcp_port, int payload, int jitt_comp, const char *infile, const char *outfile, MSSndCard *playcard, MSSndCard *captcard, bool_t use_ec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MS2_PUBLIC int audio_stream_start_full </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RtpProfile *&nbsp;</td>
          <td class="paramname"> <em>profile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rem_rtp_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rem_rtp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>rem_rtcp_ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rem_rtcp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>jitt_comp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>infile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>outfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *&nbsp;</td>
          <td class="paramname"> <em>playcard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *&nbsp;</td>
          <td class="paramname"> <em>captcard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&nbsp;</td>
          <td class="paramname"> <em>use_ec</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Starts an audio stream from/to local wav files or soundcards.</p>
<p>This method starts the processing of the audio stream, that is playing from wav file or soundcard, voice processing, encoding, sending through RTP, receiving from RTP, decoding, voice processing and wav file recording or soundcard playback.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>an AudioStream previously created with <a class="el" href="group__audio__stream__api.html#ga90bb2b40afbb681ee0757d7bc9806a5f">audio_stream_new()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prof</em>&nbsp;</td><td>a RtpProfile containing all PayloadType possible during the audio session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rem_rtp_ip</em>&nbsp;</td><td>remote IP address where to send the encoded audio. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rem_rtp_port</em>&nbsp;</td><td>remote IP port where to send the encoded audio. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rem_rtcp_ip</em>&nbsp;</td><td>remote IP address for RTCP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rem_rtcp_port</em>&nbsp;</td><td>remote port for RTCP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>payload_type</em>&nbsp;</td><td>payload type index to use for the sending stream. This index must point to a valid PayloadType in the RtpProfile. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>jitt_comp</em>&nbsp;</td><td>Nominal jitter buffer size in milliseconds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>infile</em>&nbsp;</td><td>path to wav file to play out (can be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>outfile</em>&nbsp;</td><td>path to wav file to record into (can be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>playcard</em>&nbsp;</td><td>The soundcard to be used for playback (can be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>captcard</em>&nbsp;</td><td>The soundcard to be used for catpure. (can be NULL) </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>echo_cancel</em>&nbsp;</td><td>whether echo cancellation is to be performed. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>0 if sucessful, -1 otherwise. </dd></dl>

</div>
</div>
<a class="anchor" id="ga90bb2b40afbb681ee0757d7bc9806a5f"></a><!-- doxytag: member="mediastream.h::audio_stream_new" ref="ga90bb2b40afbb681ee0757d7bc9806a5f" args="(int loc_rtp_port, int loc_rtcp_port, bool_t ipv6)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MS2_PUBLIC <a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a>* audio_stream_new </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>loc_rtp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>loc_rtcp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&nbsp;</td>
          <td class="paramname"> <em>ipv6</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Creates an AudioStream object listening on a RTP port. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>loc_rtp_port</em>&nbsp;</td><td>the local UDP port to listen for RTP packets. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>loc_rtcp_port</em>&nbsp;</td><td>the local UDP port to listen for RTCP packets </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ipv6</em>&nbsp;</td><td>TRUE if ipv6 must be used. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>a new AudioStream. </dd></dl>

</div>
</div>
<a class="anchor" id="ga245f085458e2325150e61f1ffd750850"></a><!-- doxytag: member="mediastream.h::audio_stream_start_now" ref="ga245f085458e2325150e61f1ffd750850" args="(AudioStream *stream, RtpProfile *prof, const char *remip, int remport, int rem_rtcp_port, int payload_type, int jitt_comp, MSSndCard *playcard, MSSndCard *captcard, bool_t echo_cancel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MS2_PUBLIC int audio_stream_start_now </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">RtpProfile *&nbsp;</td>
          <td class="paramname"> <em>prof</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>remip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>remport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>rem_rtcp_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>payload_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>jitt_comp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *&nbsp;</td>
          <td class="paramname"> <em>playcard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__mediastreamer2__soundcard.html#ga183435ffafe51b0a11e13326041f9bf8">MSSndCard</a> *&nbsp;</td>
          <td class="paramname"> <em>captcard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool_t&nbsp;</td>
          <td class="paramname"> <em>echo_cancel</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Starts an audio stream from local soundcards.</p>
<p>This method starts the processing of the audio stream, that is capture from soundcard, voice processing, encoding, sending through RTP, receiving from RTP, decoding, voice processing and soundcard playback.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stream</em>&nbsp;</td><td>an AudioStream previously created with <a class="el" href="group__audio__stream__api.html#ga90bb2b40afbb681ee0757d7bc9806a5f">audio_stream_new()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>prof</em>&nbsp;</td><td>a RtpProfile containing all PayloadType possible during the audio session. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remip</em>&nbsp;</td><td>remote IP address where to send the encoded audio. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remport</em>&nbsp;</td><td>remote IP port where to send the encoded audio </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>rem_rtcp_port</em>&nbsp;</td><td>remote port for RTCP. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>payload_type</em>&nbsp;</td><td>payload type index to use for the sending stream. This index must point to a valid PayloadType in the RtpProfile. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>jitt_comp</em>&nbsp;</td><td>Nominal jitter buffer size in milliseconds. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>playcard</em>&nbsp;</td><td>The soundcard to be used for playback </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>captcard</em>&nbsp;</td><td>The soundcard to be used for catpure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>echo_cancel</em>&nbsp;</td><td>whether echo cancellation is to be performed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga40714ac4d954903adb27cca6477b680a"></a><!-- doxytag: member="mediastream.h::audio_stream_iterate" ref="ga40714ac4d954903adb27cca6477b680a" args="(AudioStream *stream)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MS2_PUBLIC void audio_stream_iterate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__audio__stream__api.html#ga9e8d8f2dbcc208a83179961032fc76b4">AudioStream</a> *&nbsp;</td>
          <td class="paramname"> <em>stream</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Executes background low priority tasks related to audio processing (RTP statistics analysis). It should be called periodically, for example with an interval of 100 ms or so. </p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 18 Mar 2014 for mediastreamer2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
